---
import Layout from "../../layouts/Layout.astro";
import { getLangFromUrl, t, getLocalizedPath } from '../../i18n/translations';

const currentLang = getLangFromUrl(Astro.url);
---

<Layout title={`${t(currentLang, 'accountPage.title')} | Peptide Shop`} description={t(currentLang, 'accountPage.description')}>
  <!-- Hero Section -->
  <section class="page-hero" style="background: linear-gradient(135deg, #0077b6, #023e8a); padding: 60px 0;">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-8">
          <nav aria-label="breadcrumb" style="margin-bottom: 1rem;">
            <ol class="breadcrumb" style="margin-bottom: 0; background: transparent; padding: 0;">
              <li class="breadcrumb-item"><a href={getLocalizedPath('/', currentLang)} style="color: white; text-decoration: none; font-weight: 500;">{t(currentLang, 'common.home')}</a></li>
              <li class="breadcrumb-item active" aria-current="page" style="color: white; font-weight: 600;">{t(currentLang, 'accountPage.title')}</li>
            </ol>
          </nav>
          <h1 style="color: white; font-weight: 800; font-size: 2.5rem; margin-bottom: 1rem;">{t(currentLang, 'accountPage.title')}</h1>
          <p style="color: rgba(255,255,255,0.9); font-size: 1.1rem; margin-bottom: 0; max-width: 600px;">
            {t(currentLang, 'accountPage.description')}
          </p>
        </div>
        <div class="col-lg-4 text-lg-end d-none d-lg-block">
          <div style="display: inline-flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.15); padding: 12px 20px; border-radius: 50px;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span style="color: white; font-weight: 600;">{t(currentLang, 'accountPage.dashboard')}</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Dashboard Content -->
  <section style="background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%); min-height: 70vh;">
    <div id="dashboard-root" data-lang={currentLang}></div>
  </section>
</Layout>

<script>
  import { createElement } from 'react';
  import { createRoot } from 'react-dom/client';
  import Dashboard from '../../components/Dashboard';

  const container = document.getElementById('dashboard-root');
  if (container) {
    const lang = container.dataset.lang || 'en';
    const root = createRoot(container);
    root.render(createElement(Dashboard, { lang: lang as any }));
  }
</script>

<style>
  .page-hero {
    position: relative;
    overflow: hidden;
  }
  
  .page-hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -25%;
    width: 80%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
    pointer-events: none;
  }

  .breadcrumb-item + .breadcrumb-item::before {
    content: "â€º";
    color: white;
    padding: 0 0.5rem;
  }

  @media (max-width: 991px) {
    .page-hero {
      padding: 40px 0 !important;
    }
    
    h1 {
      font-size: 2rem !important;
    }
  }
</style>
