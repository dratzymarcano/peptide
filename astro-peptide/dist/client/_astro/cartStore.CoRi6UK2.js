import{a as o}from"./index.CEvxOxeV.js";import{c}from"./index.Bhz7cRIx.js";let u=(e={})=>{let t=o(e);return t.setKey=function(a,i){typeof i>"u"?a in t.value&&(t.value={...t.value},delete t.value[a],t.notify(a)):t.value[a]!==i&&(t.value={...t.value,[a]:i},t.notify(a))},t};const s=u({}),y=o(!1),f=o(null);function p(){f.set(null)}c(s,e=>Object.values(e).reduce((t,a)=>t+a.quantity,0));const v=c(s,e=>Object.values(e).reduce((t,a)=>t+a.price*a.quantity,0)),r=typeof window<"u";function n(){r&&localStorage.setItem("peptide-cart",JSON.stringify(s.get()))}if(r){const e=localStorage.getItem("peptide-cart");if(e)try{s.set(JSON.parse(e))}catch{s.set({})}}function I(e){const t=e.quantity||1,a=s.get()[e.id];a?s.setKey(e.id,{...a,quantity:a.quantity+t}):s.setKey(e.id,{...e,quantity:t}),n(),f.set(e)}function l(e){const t={...s.get()};delete t[e],s.set(t),n()}function C(e,t){const a=s.get()[e];a&&(t<=0?l(e):(s.setKey(e,{...a,quantity:t}),n()))}function m(e){const t={...s.get()};delete t[e],s.set(t),n()}function q(e,t){const a=s.get()[e];a&&(t<=0?m(e):(s.setKey(e,{...a,quantity:t}),n()))}function K(){s.set({}),n()}export{I as a,v as b,s as c,f as d,p as e,q as f,m as g,K as h,y as i,l as r,C as u};
