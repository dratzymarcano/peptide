import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as M}from"./index.DK-fsZOb.js";import{u as R}from"./index.BYjIhr-9.js";import{a as _}from"./cartStore.CoRi6UK2.js";import{t as s}from"./translations.DwwPAycK.js";import{c as I,e as O,f as n}from"./currencyStore.Bt_PHIZe.js";import"./index.CEvxOxeV.js";import"./index.Bhz7cRIx.js";const m=200,B=500,D=c=>c>=1e3?15:c>=500?12:c>=300?10:c>=200?8:0,U=[1,2,3,4,5],Q=c=>{const l=c.toLowerCase();return l.includes("vial")?"pack":l.includes("cap")?"bottle":l.includes("month")||l.includes("powder")?"unit":"pack"},V=c=>{const f=c.toLowerCase().match(/^(\d+)\s*[Ã—x]?\s*/i);if(f){const j=parseInt(f[1],10);if(j>1)return j}return null},K=c=>{const l=c.toLowerCase();return l.includes("vial")?"vial":l.includes("cap")?"capsule":(l.includes("powder"),"unit")};function se({id:c,title:l,basePrice:f,packageSizes:j,image:T,lang:t}){const[i,w]=M.useState(1),r=R(I);R(O);const[d,C]=M.useState(!1),x=f,p=j[0]||"1 pack",h=Q(p),S=V(p),F=K(p),z=S?x/S:null,u=x*i,o=u>=m,b=D(u),g=o?Math.round(u*b)/100:0,$=u-g,P=o?Math.round(x*(100-b)/100*100)/100:x,W=u>=B,E=Math.ceil(m/x),N=Math.max(0,E-i),A=()=>h==="pack"?s(t,"product.pack"):h==="bottle"?s(t,"product.bottle"):s(t,"product.unit"),L=()=>{if(!o){const a=A();alert(`${s(t,"product.minRequired")}: ${n(m,r)}. `+s(t,"product.addMore").replace("{count}",String(N)).replace("{unit}",a));return}_({id:`${c}-pack-${i}`,title:`${l} (${i}x ${p})`,price:P,thumb_src:T,thumb_alt:l,size:`${i}x ${p}`,quantity:i}),C(!0),setTimeout(()=>C(!1),2e3)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"product-options",children:[e.jsxs("div",{className:"price-display mb-4 p-4 rounded",style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",border:"1px solid #bae6fd"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("span",{className:"text-muted",children:[s(t,"product.pricePer")," ",s(t,`product.${h}`),":"]}),e.jsxs("div",{className:"text-right",children:[o&&b>0&&e.jsx("span",{className:"text-muted text-decoration-line-through mr-2",style:{fontSize:"0.9rem"},children:n(x,r)}),e.jsx("span",{className:"font-weight-bold text-primary",style:{fontSize:"1.5rem"},children:o?n(P,r):n(x,r)})]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"small text-muted",children:p}),z&&e.jsxs("span",{className:"small",style:{color:"#64748b"},children:["(",n(z,r)," ",s(t,"product.perUnit")," ",s(t,`product.${F}`),")"]})]})]}),e.jsx("div",{className:"discount-banner mb-4 p-3 rounded",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",x2:"7.01",y1:"7",y2:"7"})]}),e.jsx("span",{className:"font-weight-bold",children:s(t,"product.discountBanner").replace("{amount}",B.toString())})]})}),e.jsxs("div",{className:"option-group mb-4",children:[e.jsxs("label",{className:"option-label font-weight-bold mb-3 d-block",children:[s(t,"product.selectQuantity"),":"]}),e.jsx("div",{className:"pack-options d-flex flex-wrap",style:{gap:"8px"},children:U.map(a=>{const y=x*a,v=D(y),k=y>=m,H=k?Math.round(y*(100-v))/100:y;return e.jsxs("button",{className:`pack-btn ${i===a?"active":""}`,onClick:()=>w(a),style:{flex:"1 1 calc(20% - 8px)",minWidth:"100px",padding:"12px 4px",border:i===a?"2px solid #0077b6":"2px solid #e2e8f0",borderRadius:"10px",background:i===a?"rgba(0, 119, 182, 0.1)":"white",cursor:"pointer",transition:"all 0.2s ease",textAlign:"center",position:"relative",overflow:"visible"},children:[e.jsxs("div",{className:"pack-qty font-weight-bold",style:{fontSize:"1rem",color:"#1e293b"},children:[a,e.jsx("span",{style:{display:"block",fontWeight:"normal",fontSize:"0.75rem",lineHeight:"1.2"},children:s(t,a>1?`product.${h}s`:`product.${h}`)})]}),e.jsx("div",{className:"pack-price",style:{color:k?"#0077b6":"#64748b",fontWeight:"600"},children:n(H,r)}),k&&v>0&&e.jsxs("span",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#10b981",color:"white",fontSize:"10px",fontWeight:"700",padding:"2px 6px",borderRadius:"10px"},children:[v,"% ",s(t,"product.off")]}),!k&&e.jsxs("div",{className:"small text-danger mt-1",style:{fontSize:"10px"},children:[s(t,"product.belowMin")," ",n(m,r)]})]},a)})})]}),e.jsxs("div",{className:"order-summary mb-4 p-4 rounded",style:{background:"#f8fafc",border:"1px solid #e2e8f0"},children:[e.jsx("h6",{className:"font-weight-bold mb-3",style:{color:"#1e293b"},children:s(t,"cart.orderSummary")}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("span",{className:"text-muted",children:[i,"x ",p]}),e.jsx("span",{className:o&&b>0?"text-muted text-decoration-line-through":"font-weight-bold",children:n(u,r)})]}),o&&b>0&&e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",style:{color:"#10b981"},children:[e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-1",children:e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"})}),b,"% ",s(t,"product.off")]}),e.jsxs("span",{className:"font-weight-bold",children:["-",n(g,r)]})]}),W&&e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",style:{color:"#10b981"},children:[e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-1",children:[e.jsx("rect",{x:"1",y:"3",width:"15",height:"13"}),e.jsx("polygon",{points:"16 8 20 8 23 11 23 16 16 16 16 8"}),e.jsx("circle",{cx:"5.5",cy:"18.5",r:"2.5"}),e.jsx("circle",{cx:"18.5",cy:"18.5",r:"2.5"})]}),s(t,"cart.freeDelivery")]}),e.jsx("span",{className:"font-weight-bold",children:n(0,r)})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center pt-3 mt-2",style:{borderTop:"2px solid #e2e8f0"},children:[e.jsx("span",{className:"font-weight-bold",style:{fontSize:"1.1rem",color:"#1e293b"},children:s(t,"cart.total")}),e.jsx("span",{className:"font-weight-bold text-primary",style:{fontSize:"1.5rem"},children:n($,r)})]}),o&&g>0&&e.jsxs("div",{className:"text-center mt-3",children:[e.jsxs("span",{className:"badge",style:{background:"#10b981",color:"white",padding:"8px 16px",fontSize:"0.85rem"},children:["ðŸŽ‰ ",s(t,"product.youSave")," ",n(g,r),"!"]}),W&&e.jsxs("span",{className:"badge ml-2",style:{background:"#3b82f6",color:"white",padding:"8px 16px",fontSize:"0.85rem"},children:["+ ",s(t,"cart.freeDelivery")]})]}),!o&&e.jsxs("div",{className:"mt-3 p-2 rounded text-center",style:{background:"rgba(239, 68, 68, 0.1)",color:"#dc2626"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-1",style:{display:"inline"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),e.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),e.jsxs("span",{className:"small font-weight-bold",children:[s(t,"product.addMore").replace("{count}",N.toString()).replace("{unit}",s(t,`product.${h}${N>1?"s":""}`))," ",s(t,"product.minRequired")," ",n(m,r)]})]})]}),e.jsx("button",{onClick:L,className:`btn ${d?"btn-success":o?"btn-main":"btn-secondary"} w-100 d-flex align-items-center justify-content-center py-3`,disabled:d||!o,style:{borderRadius:"12px",fontSize:"1rem",fontWeight:"700",opacity:o?1:.6},children:d?e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),s(t,"product.addedToCart"),"!"]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:[e.jsx("circle",{cx:"8",cy:"21",r:"1"}),e.jsx("circle",{cx:"19",cy:"21",r:"1"}),e.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"})]}),o?s(t,"product.addToCart"):`${s(t,"product.minRequired")} ${n(m,r)}`]})}),e.jsx("div",{className:"trust-badges mt-4 p-3 rounded",style:{background:"#f8fafc"},children:e.jsxs("div",{className:"d-flex flex-wrap justify-content-center",style:{gap:"12px"},children:[e.jsxs("span",{className:"d-flex align-items-center small",style:{color:"#64748b"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",className:"mr-1",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),s(t,"product.trust.purity")]}),e.jsxs("span",{className:"d-flex align-items-center small",style:{color:"#64748b"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",className:"mr-1",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),s(t,"product.trust.coa")]}),e.jsxs("span",{className:"d-flex align-items-center small",style:{color:"#64748b"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",className:"mr-1",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),s(t,"product.trust.delivery")]})]})}),e.jsx("style",{children:`
        .product-options {
          font-family: inherit;
        }
        
        .pack-btn:hover {
          border-color: #0077b6 !important;
          background: rgba(0, 119, 182, 0.05) !important;
        }
        
        .pack-btn.active {
          box-shadow: 0 0 0 3px rgba(0, 119, 182, 0.2);
        }
        
        .text-decoration-line-through {
          text-decoration: line-through;
        }
        
        .btn-main {
          background: #0077b6;
          border: none;
          color: white;
        }
        
        .btn-main:hover:not(:disabled) {
          background: #023e8a;
          color: white;
        }
        
        @media (max-width: 576px) {
          .pack-btn {
            flex: 1 1 calc(50% - 8px) !important;
            min-width: 80px !important;
          }
        }
      `}),e.jsx("div",{className:"fixed-bottom d-md-none bg-white border-top shadow-lg",style:{zIndex:9999,padding:"12px 16px",paddingBottom:"max(12px, env(safe-area-inset-bottom))",boxShadow:"0 -4px 6px -1px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Total"}),e.jsx("span",{style:{fontSize:"1.25rem",fontWeight:700,color:"#0077b6",lineHeight:1},children:n($,r)})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("div",{className:"d-flex align-items-center border rounded",style:{height:"40px"},children:[e.jsx("button",{className:"btn btn-link text-dark p-0",style:{width:"32px",textDecoration:"none"},onClick:()=>w(Math.max(1,i-1)),children:"âˆ’"}),e.jsx("span",{className:"font-weight-bold px-1",children:i}),e.jsx("button",{className:"btn btn-link text-dark p-0",style:{width:"32px",textDecoration:"none"},onClick:()=>w(Math.min(5,i+1)),children:"+"})]}),e.jsx("button",{onClick:L,className:`btn ${d?"btn-success":"btn-primary"} d-flex align-items-center justify-content-center`,style:{height:"40px",minWidth:"130px",backgroundColor:d?"#22c55e":"#0077b6",borderColor:d?"#22c55e":"#0077b6"},disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Added"]}):"Add to Cart"})]})]})})]})})}export{se as default};
