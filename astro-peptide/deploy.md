# Deployment Guide: Cloudflare Pages

## Prerequisites

1.  **Cloudflare Account:** Sign up at [cloudflare.com](https://cloudflare.com).
2.  **GitHub Repository:** Push this code to a new GitHub repository.
3.  **Supabase Project:** Create a project at [supabase.com](https://supabase.com).

## Step 1: Database Setup (Supabase)

1.  Go to the SQL Editor in your Supabase dashboard.
2.  Run the following SQL to create the enquiries table:

```sql
create table enquiries (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  email text not null,
  name text,
  institution text,
  message text,
  items jsonb,
  status text default 'pending',
  payload jsonb
);
```

3.  Get your **Project URL** and **anon public key** from Project Settings > API.

## Step 2: Cloudflare Pages Setup

1.  Log in to Cloudflare Dashboard > **Workers & Pages**.
2.  Click **Create Application** > **Pages** > **Connect to Git**.
3.  Select your repository.
4.  **Build Settings:**
    *   **Framework Preset:** Astro
    *   **Build Command:** `npm run build`
    *   **Build Output Directory:** `dist`
5.  **Environment Variables:**
    *   Add `SUPABASE_URL`: (Your URL)
    *   Add `SUPABASE_KEY`: (Your Anon Key)
6.  Click **Save and Deploy**.

## Step 3: DNS Configuration

1.  Once deployed, go to the project's **Custom Domains** tab.
2.  Click **Set up a custom domain**.
3.  Enter your domain (e.g., `peptideresearch.eu`).
4.  Follow the instructions to update your DNS records (Cloudflare will handle this automatically if they manage your DNS).

## Step 4: Verification

1.  Visit your live URL.
2.  Navigate to a product page.
3.  Add an item to the cart.
4.  Submit an enquiry.
5.  Check your Supabase table to confirm the row was created.
